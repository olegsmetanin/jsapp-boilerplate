({constructor:function(Ja,Ka){var I,La="Leaflet is not loaded!";I=function(a){function b(){if("undefined"===typeof L){c++;if(9>c)return window.setTimeout(b,200*Math.pow(2,c));throw La;}a()}var c=0;b()};var l=function(a){function b(a){for(k=1;a=c.shift();)a()}var c=[],d,e=document,f=e.documentElement,g=f.doScroll,k=/^loade|c/.test(e.readyState);e.addEventListener&&e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d,!1);b()},!1);g&&e.attachEvent("onreadystatechange",
d=function(){/^c/.test(e.readyState)&&(e.detachEvent("onreadystatechange",d),b())});return a=g?function(b){if(y!=top)k?b():c.push(b);else a:{try{f.doScroll("left")}catch(d){setTimeout(function(){a(b)},50);break a}b()}}:function(a){k?a():c.push(a)}};"undefined"!=typeof module?module.exports=l():"function"==typeof define&&"object"==typeof define.amd?define(l):this.domready=l();l=function(){function a(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=
j[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,f,j,h,l=g,m,s=d[a];s&&("object"===typeof s&&"function"===typeof s.toJSON)&&(s=s.toJSON(a));"function"===typeof p&&(s=p.call(d,a,s));switch(typeof s){case "string":return b(s);case "number":return isFinite(s)?String(s):"null";case "boolean":case "null":return String(s);case "object":if(!s)return"null";g+=k;m=[];if("[object Array]"===Object.prototype.toString.apply(s)){h=s.length;
for(e=0;e<h;e+=1)m[e]=c(e,s)||"null";j=0===m.length?"[]":g?"[\n"+g+m.join(",\n"+g)+"\n"+l+"]":"["+m.join(",")+"]";g=l;return j}if(p&&"object"===typeof p){h=p.length;for(e=0;e<h;e+=1)f=p[e],"string"===typeof f&&(j=c(f,s))&&m.push(b(f)+(g?": ":":")+j)}else for(f in s)Object.hasOwnProperty.call(s,f)&&(j=c(f,s))&&m.push(b(f)+(g?": ":":")+j);j=0===m.length?"{}":g?"{\n"+g+m.join(",\n"+g)+"\n"+l+"}":"{"+m.join(",")+"}";g=l;return j}}var d={};"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=
function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g,k,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof d.stringify&&(d.stringify=function(a,b,d){var e;k=g="";if("number"===typeof d)for(e=0;e<d;e+=1)k+=" ";else"string"===typeof d&&(k=d);if((p=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof d.parse&&(d.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,
e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var d;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");});return d};
"undefined"!=typeof module&&module.exports?module.exports=l():"function"==typeof define&&define.amd?define(l):this.JSON=l();l=function(){var a={get:function(a){return"string"===typeof a?document.getElementById(a):a},getByClass:function(a,c,d){if(a.getElementsByClassName)return a.getElementsByClassName(d);var e=a;null==e&&(e=document);a=[];c=e.getElementsByTagName(c);e=c.length;d=RegExp("(^|\\s)"+d+"(\\s|$)");var f,g;for(g=f=0;f<e;f++)d.test(c[f].className)&&(a[g]=c[f],g++);return a},getStyle:function(a,
c){var d=a.style[c];!d&&a.currentStyle&&(d=a.currentStyle[c]);if((!d||"auto"===d)&&document.defaultView)d=(d=document.defaultView.getComputedStyle(a,null))?d[c]:null;return"auto"===d?null:d},getViewportOffset:function(b){var c=0,d=0,e=b,f=document.body,g,k=Browser.ie7;do{c+=e.offsetTop||0;d+=e.offsetLeft||0;c+=parseInt(L.DomUtil.getStyle(e,"borderTopWidth"),10)||0;d+=parseInt(L.DomUtil.getStyle(e,"borderLeftWidth"),10)||0;g=a.getStyle(e,"position");if(e.offsetParent===f&&"absolute"===g)break;if("fixed"===
g){c+=f.scrollTop||0;d+=f.scrollLeft||0;break}e=e.offsetParent}while(e);e=b;do{if(e===f)break;c-=e.scrollTop||0;d-=e.scrollLeft||0;if(!this.documentIsLtr()&&(L.Browser.webkit||k))d+=e.scrollWidth-e.clientWidth,k&&("hidden"!==a.getStyle(e,"overflow-y")&&"hidden"!==a.getStyle(e,"overflow"))&&(d+=17);e=e.parentNode}while(e);return{x:d,y:c}},documentIsLtr:function(){L.DomUtil._docIsLtrCached||(L.DomUtil._docIsLtrCached=!0,L.DomUtil._docIsLtr="ltr"===a.getStyle(document.body,"direction"));return this._docIsLtr},
create:function(a,c,d){a=document.createElement(a);a.className=c;d&&d.appendChild(a);return a},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty();this._onselectstart||(this._onselectstart=document.onselectstart||null,document.onselectstart=this.falseFn)},enableTextSelection:function(){document.onselectstart===this.falseFn&&(document.onselectstart=this._onselectstart,this._onselectstart=null)},hasClass:function(a,c){return 0<a.className.length&&
RegExp("(^|\\s)"+c+"(\\s|$)").test(a.className)},addClass:function(a,c){this.hasClass(a,c)||(a.className+=(a.className?" ":"")+c)},removeClass:function(a,c){a.className=a.className.replace(/(\S+)\s*/g,function(a,b){return b===c?"":a}).replace(/(^\s+|\s+$)/,"")},setOpacity:function(a,c){if("opacity"in a.style)a.style.opacity=c;else if("filter"in a.style){var d=!1;try{d=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){}c=Math.round(100*c);d?(d.Enabled=100!==c,d.Opacity=c):a.style.filter+=
" progid:DXImageTransform.Microsoft.Alpha(opacity="+c+")"}},testProp:function(a){for(var c=document.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},getTranslateString:function(a){var c=Browser.webkit3d;return"translate"+(c?"3d":"")+"("+a.x+"px,"+a.y+"px"+((c?",0":"")+")")},getScaleString:function(a,c){return this.getTranslateString(c.add(c.multiplyBy(-1*a)))+(" scale("+a+") ")},setPosition:function(b,c,d){b._leaflet_pos=c;!d&&Browser.any3d?(b.style[a.TRANSFORM]=this.getTranslateString(c),
Browser.mobileWebkit3d&&(b.style.WebkitBackfaceVisibility="hidden")):(b.style.left=c.x+"px",b.style.top=c.y+"px")},getPosition:function(a){return a._leaflet_pos},falseFn:function(){return!1}};a.TRANSFORM=a.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);a.TRANSITION=a.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);a.TRANSITION_END="webkitTransition"===a.TRANSITION||"OTransition"===a.TRANSITION?a.TRANSITION+"End":"transitionend";
return a};"undefined"!=typeof module&&module.exports?module.exports=l():"function"==typeof define&&define.amd?define(l):this.DomUtil=l();l=function(a,b){a=a||"bean";b=b||this;for(var c=window,d=b[a],e=/[^\.]*(?=\..*)\.|.*/,f=/\..*/,g=document||{},k=g.documentElement||{},j=k.addEventListener,p=j?"addEventListener":"attachEvent",u={},J=Array.prototype.slice,n=function(a,b){return a.split(b||" ")},H={},h=n("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+
(j?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":
"")),l=void 0,l=0;l<h.length;l++)h[l]&&(H[h[l]]=1);var m,t="compareDocumentPosition"in k?function(a,b){return b.compareDocumentPosition&&16===(b.compareDocumentPosition(a)&16)}:"contains"in k?function(a,b){b=9===b.nodeType||b===window?k:b;return b!==a&&b.contains(a)}:function(a,b){for(;a=a.parentNode;)if(a===b)return 1;return 0},h=function(a){a=a.relatedTarget;return!a?null==a:a!==this&&"xul"!==a.prefix&&!/document/.test(this.toString())&&!t(a,this)};m={mouseenter:{base:"mouseover",condition:h},mouseleave:{base:"mouseout",
condition:h},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}};var s=n("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),w=s.concat(n("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),A=w.concat(n("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),
q=s.concat(n("char charCode key keyCode keyIdentifier keyLocation location")),y=s.concat(n("data")),v=s.concat(n("touches targetTouches changedTouches scale rotation")),G=s.concat(n("data origin source")),Y=s.concat(n("state")),Oa=/over|out/,fa=[{reg:/key/i,fix:function(a,b){b.keyCode=a.keyCode||a.which;return q}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(a,b,c){b.rightClick=3===a.which||2===a.button;b.pos={x:0,y:0};if(a.pageX||a.pageY)b.clientX=a.pageX,b.clientY=a.pageY;
else if(a.clientX||a.clientY)b.clientX=a.clientX+g.body.scrollLeft+k.scrollLeft,b.clientY=a.clientY+g.body.scrollTop+k.scrollTop;Oa.test(c)&&(b.relatedTarget=a.relatedTarget||a[("mouseover"==c?"from":"to")+"Element"]);return w}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return A}},{reg:/^text/i,fix:function(){return y}},{reg:/^touch|^gesture/i,fix:function(){return v}},{reg:/^message$/i,fix:function(){return G}},{reg:/^popstate$/i,fix:function(){return Y}},{reg:/.*/,fix:function(){return s}}],
ra={},K=function(a,b,d){if(arguments.length&&(this.originalEvent=a=a||((b.ownerDocument||b.document||b).parentWindow||c).event,this.isNative=d,this.isBean=!0,a)){var e=a.type,f=a.target||a.srcElement,g,j,k;this.target=f&&3===f.nodeType?f.parentNode:f;if(d){k=ra[e];if(!k){f=0;for(g=fa.length;f<g;f++)if(fa[f].reg.test(e)){ra[e]=k=fa[f].fix;break}}e=k(a,this,e);for(f=e.length;f--;)if(!((j=e[f])in this)&&j in a)this[j]=a[j]}}};K.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():
this.originalEvent.returnValue=!1};K.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0};K.prototype.stop=function(){this.preventDefault();this.stopPropagation();this.stopped=!0};K.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation();this.isImmediatePropagationStopped=function(){return!0}};K.prototype.isImmediatePropagationStopped=
function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()};K.prototype.clone=function(a){var b=new K(this,this.element,this.isNative);b.currentTarget=a;return b};var sa=function(a,b,c,d){var e=c?function(e){var f=b.__beanDel?b.__beanDel.ft(e.target,a):this;if(c.apply(f,arguments))return e&&(e.currentTarget=f),b.apply(a,d?J.call(arguments,e?0:1).concat(d):arguments)}:function(c){b.__beanDel&&(c=c.clone(b.__beanDel?b.__beanDel.ft(c.target,
a):void 0));return b.apply(a,d?J.call(arguments,c?0:1).concat(d):arguments)};e.__beanDel=b.__beanDel;return e},Z=function(a,b,d,e,f,G,n){var u=m[b];"unload"==b&&(d=C(z,a,b,d,e));u&&(u.condition&&(d=sa(a,d,u.condition,G)),b=u.base||b);this.isNative=u=H[b]&&!!a[p];this.customType=!j&&!u&&b;this.element=a;this.type=b;this.original=e;this.namespaces=f;this.eventType=j||u?b:"propertychange";this.target=!j&&!u&&(a===g||a===c)?k:a;this[p]=!!this.target[p];this.root=n;this.handler=sa(a,d,null,G)};Z.prototype.inNamespaces=
function(a){var b,c,d=0;if(!a)return!0;if(!this.namespaces)return!1;for(b=a.length;b--;)for(c=this.namespaces.length;c--;)a[b]==this.namespaces[c]&&d++;return a.length===d};Z.prototype.matches=function(a,b,c){return this.element===a&&(!b||this.original===b)&&(!c||this.handler===c)};var r,x={},ga=function(a,b,c,d,e,f){var g=e?"r":"$";if(!b||"*"==b)for(var j in x)j.charAt(0)==g&&ga(a,j.substr(1),c,d,e,f);else{e=0;j=x[g+b];var k="*"==a;if(j)for(g=j.length;e<g&&(!k&&!j[e].matches(a,c,d)||f(j[e],j,e,b));e++);
}};r={has:function(a,b,c,d){if(d=x[(d?"r":"$")+b])for(b=d.length;b--;)if(!d[b].root&&d[b].matches(a,c,null))return!0;return!1},get:function(a,b,c,d){var e=[];ga(a,b,c,null,d,function(a){return e.push(a)});return e},put:function(a){var b=!a.root&&!this.has(a.element,a.type,null,!1),c=(a.root?"r":"$")+a.type;(x[c]||(x[c]=[])).push(a);return b},del:function(a){ga(a.element,a.type,null,a.handler,a.root,function(a,b,c){b.splice(c,1);a.removed=!0;0===b.length&&delete x[(a.root?"r":"$")+a.type];return!1})},
entries:function(){var a,b=[];for(a in x)"$"==a.charAt(0)&&(b=b.concat(x[a]));return b}};var ta,h=function(a){ta=arguments.length?a:g.querySelectorAll?function(a,b){return b.querySelectorAll(a)}:function(){throw Error("Bean: No selector engine installed");}},B=function(a,b){if(j||!b||!(a&&a.propertyName!="_on"+b)){var c=r.get(this,b||a.type,null,!1),d=c.length,e=0;a=new K(a,this,!0);b&&(a.type=b);for(;e<d&&!a.isImmediatePropagationStopped();e++)c[e].removed||c[e].handler.call(this,a)}},E=j?function(a,
b,c){a[c?"addEventListener":"removeEventListener"](b,B,!1)}:function(a,b,c,d){if(c)r.put(b=new Z(a,d||b,function(b){B.call(a,b,d)},B,null,null,!0)),d&&null==a["_on"+d]&&(a["_on"+d]=0),b.target.attachEvent("on"+b.eventType,b.handler);else if(b=r.get(a,d||b,B,!0)[0])b.target.detachEvent("on"+b.eventType,b.handler),r.del(b)},C=function(a,b,c,d,e){return function(){d.apply(this,arguments);a(b,c,e)}},z=function(a,b,c,d){b=b&&b.replace(f,"");b=r.get(a,b,null,!1);var e={},g,j;g=0;for(j=b.length;g<j;g++)if((!c||
b[g].original===c)&&b[g].inNamespaces(d))r.del(b[g]),!e[b[g].eventType]&&b[g][p]&&(e[b[g].eventType]={t:b[g].eventType,c:b[g].type});for(g in e)r.has(a,e[g].t,null,!1)||E(a,e[g].t,!1,e[g].c)},F=j?function(a,b,d){var e=g.createEvent(a?"HTMLEvents":"UIEvents");e[a?"initEvent":"initUIEvent"](b,!0,!0,c,1);d.dispatchEvent(e)}:function(a,b,d){d=!j&&!a&&(d===g||d===c)?k:d;a?d.fireEvent("on"+b,g.createEventObject()):d["_on"+b]++},D=function(a,b,c){var d="string"==typeof b,g,j;if(d&&0<b.indexOf(" ")){b=n(b);
for(j=b.length;j--;)D(a,b[j],c);return a}if((j=d&&b.replace(f,""))&&m[j])j=m[j].base;if(!b||d){if(b=d&&b.replace(e,""))b=n(b,".");z(a,j,c,b)}else if("function"==typeof b)z(a,null,b);else for(g in b)b.hasOwnProperty(g)&&D(a,g,b[g]);return a},U=function(a,b,c,d){var g,j,k,G,h,H;if(void 0===c&&"object"==typeof b)for(g in b)b.hasOwnProperty(g)&&U.call(this,a,g,b[g]);else{if("function"!=typeof c){g=d;G=J.call(arguments,4);var l=c,m=g,Y=function(a,b){for(var c,d="string"==typeof l?ta(l,b):l;a&&a!==b;a=
a.parentNode)for(c=d.length;c--;)if(d[c]===a)return a};j=function(a){var b=Y(a.target,this);b&&m.apply(b,arguments)};j.__beanDel={ft:Y,selector:l};d=j}else G=J.call(arguments,3),d=g=c;j=n(b);this===u&&(d=C(D,a,b,d,g));for(k=j.length;k--;)H=r.put(h=new Z(a,j[k].replace(f,""),d,g,n(j[k].replace(e,""),"."),G,!1)),h[p]&&H&&E(a,h.eventType,!0,h.customType);return a}},l={on:U,add:function(a,b,c,d){return U.apply(null,"string"!=typeof c?J.call(arguments):[a,c,b,d].concat(3<arguments.length?J.call(arguments,
5):[]))},one:function(){return U.apply(u,arguments)},off:D,remove:D,clone:function(a,b,c){b=r.get(b,c,null,!1);c=b.length;for(var d=0,e,f;d<c;d++)b[d].original&&(e=[a,b[d].type],(f=b[d].handler.__beanDel)&&e.push(f.selector),e.push(b[d].original),U.apply(null,e));return a},fire:function(a,b,c){var d=n(b),g,j,k,G;for(g=d.length;g--;){b=d[g].replace(f,"");if(k=d[g].replace(e,""))k=n(k,".");if(!k&&!c&&a[p])F(H[b],b,a);else{G=r.get(a,b,null,!1);c=[!1].concat(c);b=0;for(j=G.length;b<j;b++)G[b].inNamespaces(k)&&
G[b].handler.apply(a,c)}}return a},setSelectorEngine:h,noConflict:function(){b[a]=d;return this}};if(c.attachEvent){var ua=function(){var a,b=r.entries();for(a in b)b[a].type&&"unload"!==b[a].type&&D(b[a].element,b[a].type);c.detachEvent("onunload",ua);c.CollectGarbage&&c.CollectGarbage()};c.attachEvent("onunload",ua)}h();return l};"undefined"!=typeof module&&module.exports?module.exports=l():"function"==typeof define&&define.amd?define(l):this.bean=l();l=function(){function a(a){x=a}function b(a,
b){this.o=a;this.fn=b;c.apply(this,arguments)}function c(b,c){function e(a){b.timeout&&clearTimeout(g.timeout);for(g.timeout=null;0<g._completeHandlers.length;)g._completeHandlers.shift()(a)}function f(a,b,c){g._responseArgs.resp=a;g._responseArgs.msg=b;g._responseArgs.t=c;for(g._erred=!0;0<g._errorHandlers.length;)g._errorHandlers.shift()(a,b,c);e(a)}this.url="string"==typeof b?b:b.url;this.timeout=null;this._fulfilled=!1;this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=
[];this._erred=!1;this._responseArgs={};var g=this,j;if(!(j=b.type))j=(j=this.url.match(/\.(json|jsonp|html|xml)(\?|$)/))?j[1]:"js";var k=j;c=c||function(){};b.timeout&&(this.timeout=setTimeout(function(){g.abort()},b.timeout));b.success&&this._fulfillmentHandlers.push(function(){b.success.apply(b,arguments)});b.error&&this._errorHandlers.push(function(){b.error.apply(b,arguments)});b.complete&&this._completeHandlers.push(function(){b.complete.apply(b,arguments)});var n;var r=b,s=function(a){var b=
a.responseText;if(b)switch(k){case "json":try{a=p.JSON?p.JSON.parse(b):eval("("+b+")")}catch(d){return f(a,"Could not parse JSON in response",d)}break;case "js":a=eval(b);break;case "html":a=b;break;case "xml":a=a.responseXML}g._responseArgs.resp=a;g._fulfilled=!0;for(c(a);0<g._fulfillmentHandlers.length;)g._fulfillmentHandlers.shift()(a);e(a)},q=(r.method||"GET").toUpperCase(),v="string"===typeof r?r:r.url;j=!1!==r.processData&&r.data&&"string"!==typeof r.data?d.toQueryString(r.data):r.data||null;
var B;if(("jsonp"==r.type||"GET"==q)&&j)v=v+(/\?/.test(v)?"&":"?")+j,j=null;if("jsonp"==r.type){n=v;j=w++;var q=r.jsonpCallback||"callback",v=r.jsonpCallbackName||d.getcallbackPrefix(j),E=RegExp("((^|\\?|&)"+q+")=([^&]+)"),C=n.match(E),z=u.createElement("script"),F=0,I=-1!==navigator.userAgent.indexOf("MSIE 10.0");C?"?"===C[3]?n=n.replace(E,"$1="+v):v=C[3]:n=n+(/\?/.test(n)?"&":"?")+(q+"="+v);p[v]=a;z.type="text/javascript";z.src=n;z.async=!0;"undefined"!==typeof z.onreadystatechange&&!I&&(z.event=
"onclick",z.htmlFor=z.id="_reqwest_"+j);z.onload=z.onreadystatechange=function(){if(z[H]&&"complete"!==z[H]&&"loaded"!==z[H]||F)return!1;z.onload=z.onreadystatechange=null;z.onclick&&z.onclick();r.success&&r.success(x);x=void 0;t.removeChild(z);F=1};t.appendChild(z);n=void 0}else{B=D();B.open(q,v,!0);q=r.headers||{};q.Accept=q.Accept||y.accept[r.type]||y.accept["*"];!r.crossOrigin&&!q[m]&&(q[m]=y.requestedWith);q[l]||(q[l]=r.contentType||y.contentType);for(n in q)q.hasOwnProperty(n)&&B.setRequestHeader(n,
q[n]);"undefined"!==typeof r.withCredentials&&"undefined"!==typeof B.withCredentials&&(B.withCredentials=!!r.withCredentials);B.onreadystatechange=function(){B&&4==B[H]&&(B.onreadystatechange=A,h.test(B.status)?s(B):f(B))};r.before&&r.before(B);B.send(j);n=B}this.request=n}function d(a,c){return new b(a,c)}function e(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function f(a,b){var c=a.name,d=a.tagName.toLowerCase(),f=function(a){a&&!a.disabled&&b(c,e(a.attributes.value&&a.attributes.value.specified?
a.value:a.text))};if(!a.disabled&&c)switch(d){case "input":if(!/reset|button|image|file/i.test(a.type)){var f=/checkbox/i.test(a.type),d=/radio/i.test(a.type),g=a.value;(!f&&!d||a.checked)&&b(c,e(f&&""===g?"on":g))}break;case "textarea":b(c,e(a.value));break;case "select":if("select-one"===a.type.toLowerCase())f(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(d=0;a.length&&d<a.length;d++)a.options[d].selected&&f(a.options[d])}}function g(){var a,b;for(b=0;b<arguments.length;b++){a=arguments[b];
/input|select|textarea/i.test(a.tagName)&&f(a,this);for(var c=a,d=["input","select","textarea"],e=0;e<d.length;e++){var g=c[n](d[e]);for(a=0;a<g.length;a++)f(g[a],this)}}}function k(){return d.toQueryString(d.serializeArray.apply(null,arguments))}function j(){var a={};g.apply(function(b,c){b in a?(a[b]&&!q(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments);return a}var p=window,u=document,h=/^20\d$/,n="getElementsByTagName",H="readyState",l="Content-Type",m="X-Requested-With",t=u[n]("head")[0],
w=0,s="reqwest_"+ +new Date,x,A=function(){},q="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},y={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},D=p.XMLHttpRequest?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};
b.prototype={abort:function(){this.request.abort()},retry:function(){c.call(this,this.o,this.fn)},then:function(a,b){this._fulfilled?a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b));return this},always:function(a){this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a);return this},fail:function(a){this._erred?a(this._responseArgs.resp,this._responseArgs.msg,
this._responseArgs.t):this._errorHandlers.push(a);return this}};d.serializeArray=function(){var a=[];g.apply(function(b,c){a.push({name:b,value:c})},arguments);return a};d.serialize=function(){if(0===arguments.length)return"";var a,b=Array.prototype.slice.call(arguments,0);(a=b.pop())&&a.nodeType&&b.push(a)&&(a=null);a&&(a=a.type);return("map"==a?j:"array"==a?d.serializeArray:k).apply(null,b)};d.toQueryString=function(a){var b="",c,d=encodeURIComponent,e=function(a,c){b+=d(a)+"="+d(c)+"&"};if(q(a))for(c=
0;a&&c<a.length;c++)e(a[c].name,a[c].value);else for(var f in a)if(Object.hasOwnProperty.call(a,f)){var g=a[f];if(q(g))for(c=0;c<g.length;c++)e(f,g[c]);else e(f,a[f])}return b.replace(/&$/,"").replace(/%20/g,"+")};d.getcallbackPrefix=function(){return s};d.compat=function(a,c){a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp));return new b(a,c)};return d};"undefined"!=
typeof module&&module.exports?module.exports=l():"function"==typeof define&&define.amd?define(l):this.reqwest=l();var m=window,t=document,w=location,x=window.setTimeout,va=decodeURIComponent,wa=encodeURIComponent,P=function(a,b){var c=typeof a[b];return"function"==c||!!("object"==c&&a[b])||"unknown"==c},xa=function(){if(!F(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!F(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&
navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(M=a.match(/\d+/g))}if(!M){var b;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),M=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(c){}}if(!M)return!1;a=parseInt(M[0],10);b=parseInt(M[1],10);ha=9<a&&0<b;return!0},aa=function(){if(!N){N=!0;for(var a=0;a<$.length;a++)$[a]();$.length=0}},O=function(a,b){N?a.call(b):$.push(function(){a.call(b)})},A=function(a){var b=a.toLowerCase().match(ba);
a=b[2];var c=b[3],b=b[4]||"";if("http:"==a&&":80"==b||"https:"==a&&":443"==b)b="";return a+"//"+c+b},V=function(a){a=a.replace(Pa,"$1/");if(!a.match(/^(http||https):\/\//)){var b="/"===a.substring(0,1)?"":w.pathname;"/"!==b.substring(b.length-1)&&(b=b.substring(0,b.lastIndexOf("/")+1));a=w.protocol+"//"+w.host+b+a}for(;ya.test(a);)a=a.replace(ya,"");return a},Q=function(a,b){var c="",d=a.indexOf("#");-1!==d&&(c=a.substring(d),a=a.substring(0,d));var d=[],e;for(e in b)b.hasOwnProperty(e)&&d.push(e+
"="+wa(b[e]));return a+(za?"#":-1==a.indexOf("?")?"?":"&")+d.join("&")+c},F=function(a){return"undefined"===typeof a},q=function(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"===typeof d?q(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a},D=function(a){if(F(ca)){var b=t.body.appendChild(t.createElement("form")),c=b.appendChild(t.createElement("input"));c.name=E+"TEST"+Aa;ca=c!==b.elements[c.name];t.body.removeChild(b)}ca?b=t.createElement('<iframe name="'+a.props.name+'"/>'):
(b=t.createElement("IFRAME"),b.name=a.props.name);b.id=b.name=a.props.name;delete a.props.name;"string"==typeof a.container&&(a.container=t.getElementById(a.container));a.container||(q(b.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=t.body);c=a.props.src;a.props.src="javascript:false";q(b,a.props);b.border=b.frameBorder=0;b.allowTransparency=!0;a.container.appendChild(b);a.onLoad&&C(b,"load",a.onLoad);if(a.usePost){var d=a.container.appendChild(t.createElement("form")),e;d.target=
b.name;d.action=c;d.method="POST";if("object"===typeof a.usePost)for(var f in a.usePost)a.usePost.hasOwnProperty(f)&&(ca?e=t.createElement('<input name="'+f+'"/>'):(e=t.createElement("INPUT"),e.name=f),e.value=a.usePost[f],d.appendChild(e));d.submit();d.parentNode.removeChild(d)}else b.src=c;a.props.src=c;return b},Ba=function(a){var b=a.protocol,c;a.isHost=a.isHost||F(v.xdm_p);za=a.hash||!1;a.props||(a.props={});if(a.isHost)a.remote=V(a.remote),a.channel=a.channel||"default"+Aa++,a.secret=Math.random().toString(16).substring(2),
F(b)&&(b=A(w.href)==A(a.remote)?"4":P(m,"postMessage")||P(t,"postMessage")?"1":a.swf&&P(m,"ActiveXObject")&&xa()?"6":"Gecko"===navigator.product&&"frameElement"in m&&-1==navigator.userAgent.indexOf("WebKit")?"5":a.remoteHelper?"2":"0");else{a.channel=v.xdm_c.replace(/["'<>\\]/g,"");a.secret=v.xdm_s;a.remote=v.xdm_e.replace(/["'<>\\]/g,"");var b=v.xdm_p,d;if(d=a.acl){a:{d=a.acl;var e=a.remote;"string"==typeof d&&(d=[d]);for(var f,g=d.length;g--;)if(f=d[g],f=RegExp("^"==f.substr(0,1)?f:"^"+f.replace(/(\*)/g,
".$1").replace(/\?/g,".")+"$"),f.test(e)){d=!0;break a}d=!1}d=!d}if(d)throw Error("Access denied for "+a.remote);}a.protocol=b;switch(b){case "0":q(a,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(a.isHost){if(!a.local){b=w.protocol+"//"+w.host;c=t.body.getElementsByTagName("img");for(e=c.length;e--;)if(d=c[e],d.src.substring(0,b.length)===b){a.local=d.src;break}a.local||(a.local=m)}b={xdm_c:a.channel,xdm_p:0};a.local===m?(a.usePolling=!0,a.useParent=!0,a.local=w.protocol+
"//"+w.host+w.pathname+w.search,b.xdm_e=a.local,b.xdm_pa=1):b.xdm_e=V(a.local);a.container&&(a.useResize=!1,b.xdm_po=1);a.remote=Q(a.remote,b)}else q(a,{channel:v.xdm_c,remote:v.xdm_e,useParent:!F(v.xdm_pa),usePolling:!F(v.xdm_po),useResize:a.useParent?!1:a.useResize});c=[new h.stack.HashTransport(a),new h.stack.ReliableBehavior({}),new h.stack.QueueBehavior({encode:!0,maxLength:4E3-a.remote.length}),new h.stack.VerifyBehavior({initiate:a.isHost})];break;case "1":c=[new h.stack.PostMessageTransport(a)];
break;case "2":a.remoteHelper=V(a.remoteHelper);c=[new h.stack.NameTransport(a),new h.stack.QueueBehavior,new h.stack.VerifyBehavior({initiate:a.isHost})];break;case "3":c=[new h.stack.NixTransport(a)];break;case "4":c=[new h.stack.SameOriginTransport(a)];break;case "5":c=[new h.stack.FrameElementTransport(a)];break;case "6":M||xa(),c=[new h.stack.FlashTransport(a)]}c.push(new h.stack.QueueBehavior({lazy:a.lazy,remove:!0}));return c},Ca=function(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,
b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},d=0,e=a.length;d<e;d++)b=a[d],q(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b},da=this,Aa=Math.floor(1E4*Math.random()),ia=Function.prototype,ba=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,ya=/[\-\w]+\/\.\.\//,Pa=/([^:])\/\//g,W="",h={},Qa=m.easyXDM,E="easyXDM_",ca,za=!1,M,ha,C,R;if(P(m,"addEventListener"))C=function(a,b,
c){a.addEventListener(b,c,!1)},R=function(a,b,c){a.removeEventListener(b,c,!1)};else if(P(m,"attachEvent"))C=function(a,b,c){a.attachEvent("on"+b,c)},R=function(a,b,c){a.detachEvent("on"+b,c)};else throw Error("Browser not supported");var N=!1,$=[];"readyState"in t?(l=t.readyState,N="complete"==l||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==l||"interactive"==l)):N=!!t.body;if(!N){if(P(m,"addEventListener"))C(t,"DOMContentLoaded",aa);else if(C(t,"readystatechange",function(){"complete"==
t.readyState&&aa()}),t.documentElement.doScroll&&m===top){var Da=function(){if(!N){try{t.documentElement.doScroll("left")}catch(a){x(Da,1);return}aa()}};Da()}C(m,"load",aa)}for(var v,l=/xdm_e=/.test(w.search)?w.search:w.hash,l=l.substring(1).split("&"),Ea={},ja,Fa=l.length;Fa--;)ja=l[Fa].split("="),Ea[ja[0]]=va(ja[1]);v=Ea;var ka=function(){var a={},b={a:[1,2,3]};if("undefined"!=typeof S&&"function"===typeof S.stringify&&'{"a":[1,2,3]}'===S.stringify(b).replace(/\s/g,""))return S;Object.toJSON&&'{"a":[1,2,3]}'===
Object.toJSON(b).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&(b='{"a":[1,2,3]}'.evalJSON(),b.a&&(3===b.a.length&&3===b.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(ka=function(){return a},a):null};q(h,{version:"2.4.17.1",query:v,stack:{},apply:q,getJSONObject:ka,whenReady:O,noConflict:function(a){m.easyXDM=Qa;(W=a)&&(E="easyXDM_"+W.replace(".","_")+"_");return h}});h.DomHelper={on:C,un:R,requiresJSON:function(a){"object"==
typeof m.JSON&&m.JSON||t.write('<script type="text/javascript" src="'+a+'">\x3c/script>')}};var la={};h.Fn={set:function(a,b){la[a]=b},get:function(a,b){var c=la[a];b&&delete la[a];return c}};h.Socket=function(a){var b=Ca(Ba(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){if(a.onReady)a.onReady(b)}}])),c=A(a.remote);this.origin=A(a.remote);this.destroy=function(){b.destroy()};this.postMessage=function(a){b.outgoing(a,c)};b.init()};h.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=
b.local[c];"function"===typeof d&&(b.local[c]={method:d})}var e=Ca(Ba(a).concat([new h.stack.RpcBehavior(this,b),{callback:function(b){if(a.onReady)a.onReady(b)}}]));this.origin=A(a.remote);this.destroy=function(){e.destroy()};e.init()};h.stack.SameOriginTransport=function(a){var b,c,d,e;return b={outgoing:function(a,b,c){d(a);c&&c()},destroy:function(){c&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){e=A(a.remote);if(a.isHost)q(a.props,{src:Q(a.remote,{xdm_e:w.protocol+"//"+w.host+
w.pathname,xdm_c:a.channel,xdm_p:4}),name:E+a.channel+"_provider"}),c=D(a),h.Fn.set(a.channel,function(a){d=a;x(function(){b.up.callback(!0)},0);return function(a){b.up.incoming(a,e)}});else{var f=parent;if(""!==W)for(var g=0,k=W.split(".");g<k.length;g++)f=f[k[g]];d=f.easyXDM.Fn.get(a.channel,!0)(function(a){b.up.incoming(a,e)});x(function(){b.up.callback(!0)},0)}},init:function(){O(b.onDOMReady,b)}}};h.stack.FlashTransport=function(a){function b(a){x(function(){c.up.incoming(a,e)},0)}var c,d,e,
f,g;return c={outgoing:function(b,c,d){f.postMessage(a.channel,b.toString());d&&d()},destroy:function(){try{f.destroyChannel(a.channel)}catch(b){}f=null;d&&(d.parentNode.removeChild(d),d=null)},onDOMReady:function(){e=a.remote;h.Fn.set("flash_"+a.channel+"_init",function(){x(function(){c.up.callback(!0)})});h.Fn.set("flash_"+a.channel+"_onMessage",b);a.swf=V(a.swf);var k=a.swf.match(ba)[3],j=function(){h.stack.FlashTransport[k].init=!0;f=h.stack.FlashTransport[k].swf;f.createChannel(a.channel,a.secret,
A(a.remote),a.isHost);a.isHost&&(ha&&a.swfNoThrottle&&q(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),q(a.props,{src:Q(a.remote,{xdm_e:A(w.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:E+a.channel+"_provider"}),d=D(a))};if(h.stack.FlashTransport[k]&&h.stack.FlashTransport[k].init)j();else if(h.stack.FlashTransport[k])h.stack.FlashTransport[k].queue.push(j);else{h.stack.FlashTransport[k]={queue:[j]};var j=a.swf+"?host="+a.isHost,p="easyXDM_swf_"+Math.floor(1E4*Math.random());
h.Fn.set("flash_loaded"+k.replace(/[\-.]/g,"_"),function(){h.stack.FlashTransport[k].swf=f=g.firstChild;for(var a=h.stack.FlashTransport[k].queue,b=0;b<a.length;b++)a[b]();a.length=0});a.swfContainer?g="string"==typeof a.swfContainer?t.getElementById(a.swfContainer):a.swfContainer:(g=t.createElement("div"),q(g.style,ha&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(g));
var u="callback=flash_loaded"+k.replace(/[\-.]/g,"_")+"&proto="+da.location.protocol+"&domain="+da.location.href.match(ba)[3]+"&port="+(da.location.href.match(ba)[4]||"")+"&ns="+W;g.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+p+"' data='"+j+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+j+"'></param><param name='flashvars' value='"+u+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+
u+"' allowScriptAccess='always' wmode='transparent' src='"+j+"' height='1' width='1'></embed></object>"}},init:function(){O(c.onDOMReady,c)}}};h.stack.PostMessageTransport=function(a){function b(b){var d;if(b.origin)d=A(b.origin);else if(b.uri)d=A(b.uri);else if(b.domain)d=w.protocol+"//"+b.domain;else throw"Unable to retrieve the origin of the event";d==f&&b.data.substring(0,a.channel.length+1)==a.channel+" "&&c.up.incoming(b.data.substring(a.channel.length+1),d)}var c,d,e,f;return c={outgoing:function(b,
c,d){e.postMessage(a.channel+" "+b,c||f);d&&d()},destroy:function(){R(m,"message",b);d&&(e=null,d.parentNode.removeChild(d),d=null)},onDOMReady:function(){f=A(a.remote);if(a.isHost){var g=function(f){f.data==a.channel+"-ready"&&(e="postMessage"in d.contentWindow?d.contentWindow:d.contentWindow.document,R(m,"message",g),C(m,"message",b),x(function(){c.up.callback(!0)},0))};C(m,"message",g);q(a.props,{src:Q(a.remote,{xdm_e:A(w.href),xdm_c:a.channel,xdm_p:1}),name:E+a.channel+"_provider"});d=D(a)}else C(m,
"message",b),e="postMessage"in m.parent?m.parent:m.parent.document,e.postMessage(a.channel+"-ready",f),x(function(){c.up.callback(!0)},0)},init:function(){O(c.onDOMReady,c)}}};h.stack.FrameElementTransport=function(a){var b,c,d,e;return b={outgoing:function(a,b,c){d.call(this,a);c&&c()},destroy:function(){c&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){e=A(a.remote);a.isHost?(q(a.props,{src:Q(a.remote,{xdm_e:A(w.href),xdm_c:a.channel,xdm_p:5}),name:E+a.channel+"_provider"}),c=D(a),
c.fn=function(a){delete c.fn;d=a;x(function(){b.up.callback(!0)},0);return function(a){b.up.incoming(a,e)}}):(t.referrer&&A(t.referrer)!=v.xdm_e&&(m.top.location=v.xdm_e),d=m.frameElement.fn(function(a){b.up.incoming(a,e)}),b.up.callback(!0))},init:function(){O(b.onDOMReady,b)}}};h.stack.NameTransport=function(a){function b(b){k.contentWindow.sendMessage(b,a.remoteHelper+(g?"#_3":"#_2")+a.channel)}function c(){g?(2===++p||!g)&&f.up.callback(!0):(b("ready"),f.up.callback(!0))}function d(a){f.up.incoming(a,
J)}function e(){u&&x(function(){u(!0)},0)}var f,g,k,j,p,u,J,n;return f={outgoing:function(a,c,d){u=d;b(a)},destroy:function(){k.parentNode.removeChild(k);k=null;g&&(j.parentNode.removeChild(j),j=null)},onDOMReady:function(){g=a.isHost;p=0;J=A(a.remote);a.local=V(a.local);g?(h.Fn.set(a.channel,function(b){g&&"ready"===b&&(h.Fn.set(a.channel,d),c())}),n=Q(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),q(a.props,{src:n+"#"+a.channel,name:E+a.channel+"_provider"}),j=D(a)):(a.remoteHelper=a.remote,
h.Fn.set(a.channel,d));var b=function(){var d=k||this;R(d,"load",b);h.Fn.set(a.channel+"_load",e);(function Na(){"function"==typeof d.contentWindow.sendMessage?c():x(Na,50)})()};k=D({props:{src:a.local+"#_4"+a.channel},onLoad:b})},init:function(){O(f.onDOMReady,f)}}};h.stack.HashTransport=function(a){function b(){if(j){var a=j.location.href,b="",d=a.indexOf("#");-1!=d&&(b=a.substring(d));b&&b!=g&&(g=b,c.up.incoming(g.substring(g.indexOf("_")+1),h))}}var c,d,e,f,g,k,j,p,u,h;return c={outgoing:function(b){p&&
(b=a.remote+"#"+k++ +"_"+b,(d||!u?p.contentWindow:p).location=b)},destroy:function(){m.clearInterval(e);(d||!u)&&p.parentNode.removeChild(p);p=null},onDOMReady:function(){d=a.isHost;f=a.interval;g="#"+a.channel;k=0;u=a.useParent;h=A(a.remote);if(d){q(a.props,{src:a.remote,name:E+a.channel+"_provider"});if(u)a.onLoad=function(){j=m;e=setInterval(b,f);c.up.callback(!0)};else{var n=0,l=a.delay/50;(function Ma(){if(++n>l)throw Error("Unable to reference listenerwindow");try{j=p.contentWindow.frames[E+
a.channel+"_consumer"]}catch(d){}j?(e=setInterval(b,f),c.up.callback(!0)):x(Ma,50)})()}p=D(a)}else j=m,e=setInterval(b,f),u?(p=parent,c.up.callback(!0)):(q(a,{props:{src:a.remote+"#"+a.channel+new Date,name:E+a.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),p=D(a))},init:function(){O(c.onDOMReady,c)}}};h.stack.ReliableBehavior=function(){var a,b,c=0,d=0,e="";return a={incoming:function(f,g){var k=f.indexOf("_"),j=f.substring(0,k).split(",");f=f.substring(k+1);j[0]==c&&(e="",b&&(b(!0),
b=null));0<f.length&&(a.down.outgoing(j[1]+","+c+"_"+e,g),d!=j[1]&&(d=j[1],a.up.incoming(f,g)))},outgoing:function(f,g,k){e=f;b=k;a.down.outgoing(d+","+ ++c+"_"+f,g)}}};h.stack.QueueBehavior=function(a){function b(){if(a.remove&&0===d.length){var f=c;f.up.down=f.down;f.down.up=f.up;f.up=f.down=null}else if(!e&&!(0===d.length||g)){e=!0;var j=d.shift();c.down.outgoing(j.data,j.origin,function(a){e=!1;j.callback&&x(function(){j.callback(a)},0);b()})}}var c,d=[],e=!0,f="",g,k=0,j=!1,p=!1;return c={init:function(){F(a)&&
(a={});a.maxLength&&(k=a.maxLength,p=!0);a.lazy?j=!0:c.down.init()},callback:function(a){e=!1;var d=c.up;b();d.callback(a)},incoming:function(b,d){if(p){var e=b.indexOf("_"),g=parseInt(b.substring(0,e),10);f+=b.substring(e+1);0===g&&(a.encode&&(f=va(f)),c.up.incoming(f,d),f="")}else c.up.incoming(b,d)},outgoing:function(e,f,g){a.encode&&(e=wa(e));var h=[],l;if(p){for(;0!==e.length;)l=e.substring(0,k),e=e.substring(l.length),h.push(l);for(;l=h.shift();)d.push({data:h.length+"_"+l,origin:f,callback:0===
h.length?g:null})}else d.push({data:e,origin:f,callback:g});j?c.down.init():b()},destroy:function(){g=!0;c.down.destroy()}}};h.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2);c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,g){var k=f.indexOf("_");-1===k?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,k)===e&&c.up.incoming(f.substring(k+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(){a.initiate&&
b()}}};h.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0";e.down.outgoing(f.stringify(a))}function d(a,b){var d=Array.prototype.slice;return function(){var e=arguments.length,f,h={method:b};0<e&&"function"===typeof arguments[e-1]?(1<e&&"function"===typeof arguments[e-2]?(f={success:arguments[e-2],error:arguments[e-1]},h.params=d.call(arguments,0,e-2)):(f={success:arguments[e-1]},h.params=d.call(arguments,0,e-1)),k[""+ ++g]=f,h.id=g):h.params=d.call(arguments,0);a.namedParams&&1===h.params.length&&
(h.params=h.params[0]);c(h)}}var e,f=b.serializer||ka(),g=0,k={};return e={incoming:function(a){a=f.parse(a);if(a.method)if(b.handle)b.handle(a,c);else{var d=a.id,e=b.local[a.method];a=a.params;if(e){var g,h;d?(g=function(a){g=ia;c({id:d,result:a})},h=function(a,b){h=ia;var e={id:d,error:{code:-32099,message:a}};b&&(e.error.data=b);c(e)}):g=h=ia;"[object Array]"===Object.prototype.toString.call(a)||(a=[a]);try{var l=e.method.apply(e.scope,a.concat([g,h]));F(l)||g(l)}catch(m){h(m.message)}}else d&&
c({id:d,error:{code:-32601,message:"Procedure not found."}})}else l=k[a.id],a.error?l.error&&l.error(a.error):l.success&&l.success(a.result),delete k[a.id]},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&(a[c]=d(b.remote[c],c));e.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];e.down.destroy()}}};da.easyXDM=h;var ea=this,Ra=Object.prototype.toString,Ga=void 0,l=void 0,Ha=function(a){return a&&"object"===
typeof a&&!("number"===typeof a.length&&!a.propertyIsEnumerable("length"))},ma=function(a){return a&&"object"===typeof a&&"number"===typeof a.length&&!a.propertyIsEnumerable("length")},na=function(a){return a&&"function"===typeof a},oa=function(a){return na(a)&&a.prototype&&a===a.prototype.constructor},pa=function(a,b,c){if(ma(b))for(var d=b.length;0<=--d;)pa(a,b[d],c);else{c=c||{constructor:1,$super:1,prototype:1,$superb:1};var d=oa(a),e=oa(b),f=a.prototype,g,k;if(Ha(b))for(g in b){k=g;var j=b[g],
h=a,l=d,m=f;if(!c||!c.hasOwnProperty(k))h[k]=j,l&&(m[k]=j)}if(e)for(g in k=b.prototype,k){var j=g,h=k[g],l=a,m=d,n=f;if(!c||!c.hasOwnProperty(j))l[j]=h,m&&(n[j]=h)}d&&e&&pa(f,b.prototype,c)}},X=function(a,b){b||(a=(b=a,0));var c,d,e,f,g,k,j=0,h,l={constructor:1,$singleton:1,$statics:1,prototype:1,$super:1,$superp:1,main:1,toString:0};g=X.overload;var m=X.plugins;b=("function"===typeof b?b():b)||{};c=b.hasOwnProperty("constructor")?b.constructor:0;d=b.$singleton;e=b.$statics;for(f in m)l[f]=1;c=d?
{}:c?g?g("constructor",c):c:function(){};g=d?c:c.prototype;for(k=(a=!a||ma(a)?a:[a])&&a.length;j<k;){h=a[j++];for(f in h)l[f]||(g[f]=h[f],d||(c[f]=h[f]));for(f in h.prototype)l[f]||(g[f]=h.prototype[f])}for(f in b)l[f]||(g[f]=b[f]);for(f in e)c[f]=g[f]=e[f];d||(h=a&&a[0]||a,c.$super=h,c.$superp=h&&h.prototype?h.prototype:h);for(f in m)m[f](c,a,b);na(b.main)&&b.main.call(c,c);return c};X.plugins={};l={version:"2.1.1",Class:X,extend:pa,isMap:Ha,isArray:ma,isFunction:na,isString:function(a){return"[object String]"===
Ra.apply(a)},isClass:oa};"undefined"!==typeof module&&module.exports?module.exports=l:(Ga=ea.Class,ea.Class=X,ea.jsface=l,l.noConflict=function(){ea.Class=Ga});l=function(){function a(a,b,c){try{a(b,c)}catch(d){setTimeout(function(){throw d;},0)}}function b(a,b,c){a(b,c)}function c(c,d,e,g){var h=f[d];g=g?b:a;var l;if(f.hasOwnProperty(d)){d=0;for(l=h.length;d<l;d++)g(h[d].func,c,e)}}function d(a,b,d,e){var g;g=function(){var d=String(a),f=d.lastIndexOf(".");for(c(a,a,b,e);-1!==f;)d=d.substr(0,f),
f=d.lastIndexOf("."),c(a,d,b)};for(var h=String(a),l=f.hasOwnProperty(h),m=h.lastIndexOf(".");!l&&-1!==m;)h=h.substr(0,m),m=h.lastIndexOf("."),l=f.hasOwnProperty(h);if(!l)return!1;!0===d?g():setTimeout(g,0);return!0}var e={name:"PubSubJS",version:"1.3.3"},f={},g=-1;e.publish=function(a,b){return d(a,b,!1,e.immediateExceptions)};e.publishSync=function(a,b){return d(a,b,!0,e.immediateExceptions)};e.subscribe=function(a,b){f.hasOwnProperty(a)||(f[a]=[]);var c=String(++g);f[a].push({token:c,func:b});
return c};e.unsubscribe=function(a){var b="string"===typeof a,c=b?"token":"func",d=b?a:!0,e=!1,g,h;for(g in f)if(f.hasOwnProperty(g))for(h=f[g].length-1;0<=h;h--)if(f[g][h][c]===a&&(f[g].splice(h,1),e=d,b))return e;return e};return e};"object"===typeof exports?module.exports=l():"function"===typeof define&&define.amd?define(l):this.PubSub=l();I(function(){var a={};L.TileLayer.Provider=L.TileLayer.extend({initialize:function(b,c){var d=b.split("."),e=d[0],f=d[1];if(!a[e])throw"No such provider ("+
e+")";var g={url:a[e].url,options:a[e].options};if(f&&"variants"in a[e]){if(!(f in a[e].variants))throw"No such name in provider ("+f+")";d=a[e].variants[f];g={url:d.url||g.url,options:L.Util.extend({},g.options,d.options)}}else"function"===typeof g.url&&(g.url=g.url(d.splice(1).join(".")));d=g.options.attribution;-1!=d.indexOf("{attribution.")&&(g.options.attribution=d.replace(/\{attribution.(\w*)\}/,function(b,c){return a[c].options.attribution}));d=L.Util.extend({},g.options,c);L.TileLayer.prototype.initialize.call(this,
g.url,d)}});a={OpenStreetMap:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png"},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"}}},OpenCycleMap:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",
options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}},Thunderforest:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenCycleMap}"},variants:{OpenCycleMap:{},Transport:{url:"http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png"},Landscape:{url:"http://{s}.tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png"}}},
MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{url:"http://oatile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}}}},
MapBox:{url:function(a){return"http://{s}.tiles.mapbox.com/v3/"+a+"/{z}/{x}/{y}.png"},options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",
minZoom:0,maxZoom:20},variants:{Toner:{},TonerBackground:{url:"http://{s}.tile.stamen.com/toner-background/{z}/{x}/{y}.png"},TonerHybrid:{url:"http://{s}.tile.stamen.com/toner-hybrid/{z}/{x}/{y}.png"},TonerLines:{url:"http://{s}.tile.stamen.com/toner-lines/{z}/{x}/{y}.png"},TonerLabels:{url:"http://{s}.tile.stamen.com/toner-labels/{z}/{x}/{y}.png"},TonerLite:{url:"http://{s}.tile.stamen.com/toner-lite/{z}/{x}/{y}.png"},Terrain:{url:"http://{s}.tile.stamen.com/terrain/{z}/{x}/{y}.png",options:{minZoom:4,
maxZoom:18}},Watercolor:{url:"http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.png",options:{minZoom:3,maxZoom:16}}}},Esri:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",
options:{maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
options:{attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",
options:{attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:11,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},
NatGeoWorldMap:{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{options:{attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>'},
variants:{Clouds:{url:"http://{s}.tile.openweathermap.org/map/clouds/{z}/{x}/{y}.png"},CloudsClassic:{url:"http://{s}.tile.openweathermap.org/map/clouds_cls/{z}/{x}/{y}.png"},Precipitation:{url:"http://{s}.tile.openweathermap.org/map/precipitation/{z}/{x}/{y}.png"},PrecipitationClassic:{url:"http://{s}.tile.openweathermap.org/map/precipitation_cls/{z}/{x}/{y}.png"},Rain:{url:"http://{s}.tile.openweathermap.org/map/rain/{z}/{x}/{y}.png"},RainClassic:{url:"http://{s}.tile.openweathermap.org/map/rain_cls/{z}/{x}/{y}.png"},
Pressure:{url:"http://{s}.tile.openweathermap.org/map/pressure/{z}/{x}/{y}.png"},PressureContour:{url:"http://{s}.tile.openweathermap.org/map/pressure_cntr/{z}/{x}/{y}.png"},Wind:{url:"http://{s}.tile.openweathermap.org/map/wind/{z}/{x}/{y}.png"},Temperature:{url:"http://{s}.tile.openweathermap.org/map/temp/{z}/{x}/{y}.png"},Snow:{url:"http://{s}.tile.openweathermap.org/map/snow/{z}/{x}/{y}.png"}}}};L.TileLayer.provider=function(a,c){return new L.TileLayer.Provider(a,c)}});I(function(){L.Google=L.Class.extend({includes:L.Mixin.Events,
options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1},initialize:function(a,b){L.Util.setOptions(this,b);(this._ready=void 0!=google.maps.Map)||L.Google.asyncWait.push(this);this._type=a||"SATELLITE"},onAdd:function(a,b){this._map=a;this._insertAtTheBottom=b;this._initContainer();this._initMapObject();a.on("viewreset",this._resetCallback,this);this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this);a.on("move",
this._update,this);a._controlCorners.bottomright.style.marginBottom="1em";this._reset();this._update()},onRemove:function(a){this._map._container.removeChild(this._container);this._map.off("viewreset",this._resetCallback,this);this._map.off("move",this._update,this);a._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(a){this.options.opacity=a;1>a&&L.DomUtil.setOpacity(this._container,a)},setElementSize:function(a,b){a.style.width=
b.x+"px";a.style.height=b.y+"px"},_initContainer:function(){var a=this._map._container,b=a.firstChild;this._container||(this._container=L.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer_"+L.Util.stamp(this),this._container.style.zIndex="auto");a.insertBefore(this._container,b);this.setOpacity(this.options.opacity);this.setElementSize(this._container,this._map.getSize())},_initMapObject:function(){if(this._ready){this._google_center=new google.maps.LatLng(0,
0);var a=new google.maps.Map(this._container,{center:this._google_center,zoom:0,tilt:0,mapTypeId:google.maps.MapTypeId[this._type],disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),b=this;this._reposition=google.maps.event.addListenerOnce(a,"center_changed",function(){b.onReposition()});a.backgroundColor="#ff0000";this._google=a}},_resetCallback:function(a){this._reset(a.hard)},_reset:function(){this._initContainer()},_update:function(){if(this._google){this._resize();
var a=this._map.getBounds(),b=a.getNorthEast(),a=a.getSouthWest();new google.maps.LatLngBounds(new google.maps.LatLng(a.lat,a.lng),new google.maps.LatLng(b.lat,b.lng));b=this._map.getCenter();b=new google.maps.LatLng(b.lat,b.lng);this._google.setCenter(b);this._google.setZoom(this._map.getZoom())}},_resize:function(){var a=this._map.getSize();this._container.style.width==a.x&&this._container.style.height==a.y||(this.setElementSize(this._container,a),this.onReposition())},onReposition:function(){this._google&&
google.maps.event.trigger(this._google,"resize")}});L.Google.asyncWait=[];L.Google.asyncInitialize=function(){var a;for(a=0;a<L.Google.asyncWait.length;a++){var b=L.Google.asyncWait[a];b._ready=!0;b._container&&(b._initMapObject(),b._update())}L.Google.asyncWait=[]}});I(function(){L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing"},initialize:function(a,b){L.Util.setOptions(this,b);this._key=a;this._url=null;this.meta={};this.loadMetadata()},tile2quad:function(a,
b,c){for(var d="";0<c;c--){var e=0,f=1<<c-1;0!=(a&f)&&(e+=1);0!=(b&f)&&(e+=2);d+=e}return d},getTileUrl:function(a,b){b=this._getZoomForUrl();return this._url.replace("{subdomain}",this.options.subdomains[(a.x+a.y)%this.options.subdomains.length]).replace("{quadkey}",this.tile2quad(a.x,a.y,b)).replace("{culture}","")},loadMetadata:function(){var a=this,b="_bing_metadata_"+L.Util.stamp(this);window[b]=function(c){a.meta=c;window[b]=void 0;var d=document.getElementById(b);d.parentNode.removeChild(d);
c.errorDetails?alert("Got metadata"+c.errorDetails):a.initMetadata()};var c="http://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+b+"&key="+this._key,d=document.createElement("script");d.type="text/javascript";d.src=c;d.id=b;document.getElementsByTagName("head")[0].appendChild(d)},initMetadata:function(){var a=this.meta.resourceSets[0].resources[0];this.options.subdomains=a.imageUrlSubdomains;this._url=a.imageUrl;this._providers=[];for(var b=
0;b<a.imageryProviders.length;b++)for(var c=a.imageryProviders[b],d=0;d<c.coverageAreas.length;d++){var e=c.coverageAreas[d],f={zoomMin:e.zoomMin,zoomMax:e.zoomMax,active:!1},e=new L.LatLngBounds(new L.LatLng(e.bbox[0]+0.01,e.bbox[1]+0.01),new L.LatLng(e.bbox[2]-0.01,e.bbox[3]-0.01));f.bounds=e;f.attrib=c.attribution;this._providers.push(f)}this._update()},_update:function(){null!=this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var a=
this._map.getBounds(),b=this._map.getZoom(),c=0;c<this._providers.length;c++){var d=this._providers[c];b<=d.zoomMax&&b>=d.zoomMin&&a.intersects(d.bounds)?(d.active||this._map.attributionControl.addAttribution(d.attrib),d.active=!0):(d.active&&this._map.attributionControl.removeAttribution(d.attrib),d.active=!1)}},onRemove:function(a){for(var b=0;b<this._providers.length;b++){var c=this._providers[b];c.active&&(this._map.attributionControl.removeAttribution(c.attrib),c.active=!1)}L.TileLayer.prototype.onRemove.apply(this,
[a])}})});I(function(){L.Yandex=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,attribution:"",opacity:1,traffic:!1},initialize:function(a,b){L.Util.setOptions(this,b);this._type="yandex#"+(a||"currentMap")},onAdd:function(a,b){this._map=a;this._insertAtTheBottom=b;this._initContainer();this._initMapObject();a.on("viewreset",this._resetCallback,this);this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this);a.on("move",this._update,this);a._controlCorners.bottomright.style.marginBottom=
"3em";this._reset();this._update(!0)},onRemove:function(a){this._map._container.removeChild(this._container);this._map.off("viewreset",this._resetCallback,this);this._map.off("move",this._update,this);a._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(a){this.options.opacity=a;1>a&&L.DomUtil.setOpacity(this._container,a)},setElementSize:function(a,b){a.style.width=b.x+"px";a.style.height=b.y+"px"},_initContainer:function(){var a=
this._map._container,b=a.firstChild;this._container||(this._container=L.DomUtil.create("div","leaflet-yandex-layer leaflet-top leaflet-left"),this._container.id="_YMapContainer_"+L.Util.stamp(this),this._container.style.zIndex="auto");this.options.overlay&&(b=this._map._container.getElementsByClassName("leaflet-map-pane")[0],b=b.nextSibling,L.Browser.opera&&(this._container.className+=" leaflet-objects-pane"));a.insertBefore(this._container,b);this.setOpacity(this.options.opacity);this.setElementSize(this._container,
this._map.getSize())},_initMapObject:function(){if(!this._yandex){if(void 0===ymaps.Map)return console.debug("L.Yandex: Waiting on ymaps.load('package.map')"),ymaps.load(["package.map"],this._initMapObject,this);if(this.options.traffic&&(void 0===ymaps.control||void 0===ymaps.control.TrafficControl))return console.debug("L.Yandex: loading traffic and controls"),ymaps.load(["package.traffic","package.controls"],this._initMapObject,this);var a=new ymaps.Map(this._container,{center:[0,0],zoom:0,behaviors:[]});
this.options.traffic&&a.controls.add(new ymaps.control.TrafficControl({shown:!0}));"yandex#null"==this._type&&(this._type=new ymaps.MapType("null",[]),a.container.getElement().style.background="transparent");a.setType(this._type);this._yandex=a;this._update(!0)}},_resetCallback:function(a){this._reset(a.hard)},_reset:function(){this._initContainer()},_update:function(a){if(this._yandex){this._resize(a);var b=this._map.getCenter(),b=[b.lat,b.lng],c=this._map.getZoom();(a||this._yandex.getZoom()!=c)&&
this._yandex.setZoom(c);this._yandex.panTo(b,{duration:0,delay:0})}},_resize:function(a){var b=this._map.getSize(),c=this._container.style;c.width==b.x+"px"&&c.height==b.y+"px"&&!0!=a||(this.setElementSize(this._container,b),a=this._map.getBounds(),a.getSouthWest(),a.getNorthEast(),this._yandex.container.fitToViewport())}})});var y=this;I=y.Class;var T=y.DomUtil,qa=y.bean,Ia=y.PubSub,Sa=y.reqwest,S=y.JSON;delete y.Class;delete y.DomUtil;delete y.bean;delete y.PubSub;delete y.reqwest;delete y.easyXDM;
delete y.JSON;delete y.jsface;this.Samples=I({constructor:function(){},map:function(a){this.current=L.map(T.get(a)).setView([0,0],5);L.tileLayer("http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \ufffd <a href="http://cloudmade.com">CloudMade</a>'}).addTo(this.current)},dom:function(a,
b){qa.on(T.get(a),"click",function(){var a=T.create("div","newdiv",T.get(b));a.innerHTML="new div";a.style.color="magenta";console.log("Div appended in #"+b)})},pubsub:function(a){Ia.subscribe("msg",function(){console.log("Get msg!")});qa.on(T.get(a),"click",function(){Ia.publish("msg");console.log("Publish msg")})},req:function(a){qa.on(T.get(a),"click",function(){Sa({url:"http://ws.geonames.org/searchJSON?q=USA&maxRows=10&callback=?",type:"jsonp",success:function(a){console.log(S.stringify(a))},
error:function(a){console.log(S.stringify(a))}})})}});Ka[Ja]=this}}).constructor("App",this);
